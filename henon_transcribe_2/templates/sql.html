{% extends "base.html" %}

{% block title %}Transcript{% endblock %}

{% block content %}

<div style="margin-top:20px; width:100%;">
    <form method="POST" id="sqlForm" action="/transcript/{{transcript.slug}}/sql">
        <div style="margin-top:20px; width:100%;">
            <textarea style="width:800px; height:200px;" id="sqlTextArea" name="sql">{{sql}}</textarea>
            <br>
            <button type="submit">Submit</button>
        </div>
    </form>
</div>

<div style="width:100%; font-family: Courier">
    {{results|safe}}
</div>

<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function() {
        var sqlTextArea = document.getElementById("sqlTextArea");

        // Focus on textarea immediately after page load
        sqlTextArea.focus();

        sqlTextArea.addEventListener('keydown', function(event) {
            if (event.key == "Enter" && (event.metaKey || event.ctrlKey)) {
                event.preventDefault();
                document.getElementById("sqlForm").submit();
            }
        });
    });
</script>

{% endblock %}